# edge-tts è°ƒæŸ¥æ–‡æ¡£ç´¢å¼• / Investigation Documentation Index

æœ¬ä»“åº“åŒ…å«å¯¹ edge-tts é¡¹ç›®çš„å…¨é¢æŠ€æœ¯è°ƒæŸ¥ã€‚ä»¥ä¸‹æ–‡æ¡£æä¾›äº†é¡¹ç›®å®žçŽ°åŽŸç†ã€ä¾èµ–å…³ç³»å’Œæž¶æž„çš„è¯¦ç»†åˆ†æžã€‚

This repository contains a comprehensive technical investigation of the edge-tts project. The following documents provide detailed analysis of the implementation, dependencies, and architecture.

---

## ðŸ“š æ–‡æ¡£åˆ—è¡¨ / Document List

### 1. ä¸­æ–‡å®Œæ•´æŠ¥å‘Š / Chinese Full Report
**æ–‡ä»¶**: [`TTSå®žçŽ°è°ƒæŸ¥æŠ¥å‘Š.md`](./TTSå®žçŽ°è°ƒæŸ¥æŠ¥å‘Š.md)

**å†…å®¹æ¦‚è¿°**:
- âœ… TTSå®žçŽ°åŽŸç†è¯¦è§£
- âœ… æ ¸å¿ƒæœºåˆ¶å’ŒæŠ€æœ¯ç»†èŠ‚
- âœ… é¡¹ç›®ä¾èµ–åˆ†æž
- âœ… é€†å‘å·¥ç¨‹ç»†èŠ‚
- âœ… å·¥ä½œæµç¨‹å’Œç¤ºä¾‹ä»£ç 
- âœ… æŠ€æœ¯äº®ç‚¹æ€»ç»“

**é€‚åˆäººç¾¤**: éœ€è¦æ·±å…¥äº†è§£æŠ€æœ¯ç»†èŠ‚çš„ä¸­æ–‡è¯»è€…

---

### 2. English Summary
**File**: [`INVESTIGATION_SUMMARY.md`](./INVESTIGATION_SUMMARY.md)

**Contents**:
- âœ… Quick answer to main questions
- âœ… How it works overview
- âœ… Dependencies list
- âœ… Key technical details
- âœ… Example usage
- âœ… Conclusion

**Target Audience**: English readers who want a concise overview

---

### 3. Architecture Documentation
**File**: [`ARCHITECTURE.md`](./ARCHITECTURE.md)

**Contents**:
- âœ… System architecture diagram
- âœ… Request flow visualization
- âœ… Authentication mechanism
- âœ… Text processing pipeline
- âœ… Component details
- âœ… Data flow diagrams

**Target Audience**: Developers and architects who want visual representation

---

## ðŸŽ¯ æ ¸å¿ƒå‘çŽ° / Key Findings

### æ˜¯å¦é€†å‘äº†å¾®è½¯æŽ¥å£ï¼Ÿ/ Did it reverse-engineer Microsoft's API?

**æ˜¯çš„ï¼/ Yes!** edge-tts é€šè¿‡é€†å‘å·¥ç¨‹å¤åˆ¶äº† Microsoft Edge æµè§ˆå™¨çš„ TTS åŠŸèƒ½ã€‚

The edge-tts project successfully reverse-engineered Microsoft Edge browser's TTS functionality.

### å…³é”®è¯æ® / Evidence:

1. **ç¡¬ç¼–ç çš„ TrustedClientToken** / Hardcoded TrustedClientToken
   - `6A5AA1D4EAFF4E9FB37E23D68491D6F4`

2. **æµè§ˆå™¨æ¨¡æ‹Ÿ** / Browser Impersonation
   - User-Agent ä¼ªè£…æˆ Edge 143.0.3650.75
   - Origin æ¥è‡ª Chrome æ‰©å±•

3. **DRM ä»¤ç‰Œç”Ÿæˆ** / DRM Token Generation
   - åŸºäºŽæ—¶é—´çš„ SHA256 å“ˆå¸Œç®—æ³•
   - 5åˆ†é’Ÿç²’åº¦çš„æ—¶é—´å¯¹é½

---

## ðŸ“¦ ä¾èµ–é¡¹ / Dependencies

ä»…éœ€ **4 ä¸ªæ ¸å¿ƒä¾èµ–** / Only **4 core dependencies**:

```python
aiohttp>=3.8.0,<4.0.0           # WebSocket é€šä¿¡
certifi>=2023.11.17              # SSL è¯ä¹¦
tabulate>=0.4.4,<1.0.0          # è¡¨æ ¼æ ¼å¼åŒ–
typing-extensions>=4.1.0,<5.0.0 # ç±»åž‹æç¤º
```

---

## ðŸ” å¦‚ä½•ä½¿ç”¨ / How to Use

### åŸºç¡€ç¤ºä¾‹ / Basic Example

```python
import asyncio
import edge_tts

async def main():
    text = "Hello, world! ä½ å¥½ï¼Œä¸–ç•Œï¼"
    voice = "en-US-EmmaMultilingualNeural"
    
    # åˆ›å»ºé€šä¿¡å¯¹è±¡ / Create communicate object
    communicate = edge_tts.Communicate(text, voice)
    
    # ä¿å­˜éŸ³é¢‘å’Œå­—å¹• / Save audio and subtitles
    await communicate.save("output.mp3", "output.vtt")

asyncio.run(main())
```

### å‘½ä»¤è¡Œä½¿ç”¨ / Command Line Usage

```bash
# ç”ŸæˆéŸ³é¢‘ / Generate audio
edge-tts --text "Hello, world!" --write-media hello.mp3

# åˆ—å‡ºå¯ç”¨è¯­éŸ³ / List available voices
edge-tts --list-voices

# è°ƒæ•´è¯­é€Ÿå’ŒéŸ³é‡ / Adjust rate and volume
edge-tts --rate=+50% --volume=-20% --text "Faster and quieter" --write-media output.mp3
```

---

## ðŸ—ï¸ æž¶æž„æ¦‚è§ˆ / Architecture Overview

```
ç”¨æˆ·åº”ç”¨ / User Application
        â†“
edge-tts åº“ / Library
        â†“
WebSocket (WSS)
        â†“
Microsoft TTS Service
        â†“
éŸ³é¢‘ + å…ƒæ•°æ® / Audio + Metadata
```

è¯¦ç»†æž¶æž„å›¾è¯·å‚è§ [`ARCHITECTURE.md`](./ARCHITECTURE.md)

For detailed architecture diagrams, see [`ARCHITECTURE.md`](./ARCHITECTURE.md)

---

## ðŸ’¡ æŠ€æœ¯äº®ç‚¹ / Technical Highlights

1. **å¼‚æ­¥è®¾è®¡** / Async Design
   - å®Œæ•´çš„ async/await æ”¯æŒ
   - åŒæ­¥ API åŒ…è£…å™¨

2. **å®¹é”™æœºåˆ¶** / Fault Tolerance
   - è‡ªåŠ¨æ—¶é’Ÿåå·®æ ¡æ­£
   - 403 é”™è¯¯è‡ªåŠ¨é‡è¯•

3. **å­—å¹•ç”Ÿæˆ** / Subtitle Generation
   - å­—è¾¹ç•Œå’Œå¥è¾¹ç•Œæ—¶é—´æˆ³
   - SRT/VTT æ ¼å¼æ”¯æŒ

4. **è·¨å¹³å°** / Cross-Platform
   - çº¯ Python å®žçŽ°
   - Windows, Linux, macOS

---

## ðŸ“Š ä»£ç è´¨é‡ / Code Quality

- âœ… å®Œæ•´çš„ç±»åž‹æç¤º / Full type hints
- âœ… è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸² / Comprehensive docstrings
- âœ… å¼‚å¸¸å¤„ç† / Exception handling
- âœ… æ¨¡å—åŒ–è®¾è®¡ / Modular design
- âœ… éµå¾ª PEP 8 / PEP 8 compliant

---

## ðŸ”— ç›¸å…³é“¾æŽ¥ / Related Links

- åŽŸå§‹ä»“åº“ / Original Repository: https://github.com/rany2/edge-tts
- é—®é¢˜è·Ÿè¸ª / Issue Tracker: https://github.com/rany2/edge-tts/issues
- PyPI: https://pypi.org/project/edge-tts/

---

## ðŸ“ æ€»ç»“ / Conclusion

edge-tts æ˜¯ä¸€ä¸ª**ä¼˜ç§€çš„é€†å‘å·¥ç¨‹æ¡ˆä¾‹**ï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡åˆ†æžæµè§ˆå™¨è¡Œä¸ºæ¥å¤åˆ¶äº‘æœåŠ¡åŠŸèƒ½ã€‚é¡¹ç›®ä»£ç è´¨é‡é«˜ã€ä¾èµ–å°‘ã€åŠŸèƒ½å®Œæ•´ï¼Œæ˜¯å­¦ä¹ é€†å‘å·¥ç¨‹å’Œ Python å¼‚æ­¥ç¼–ç¨‹çš„å¥½ä¾‹å­ã€‚

edge-tts is an **excellent reverse engineering example** that demonstrates how to replicate cloud service functionality by analyzing browser behavior. With high code quality, minimal dependencies, and complete functionality, it's a great example for learning reverse engineering and Python async programming.

---

**è°ƒæŸ¥å®Œæˆæ—¶é—´ / Investigation Completed**: 2025-12-28
**è°ƒæŸ¥è€… / Investigator**: GitHub Copilot Agent
